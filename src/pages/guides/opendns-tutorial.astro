---
import GuideLayout from '~/layouts/GuideLayout.astro';

const metadata = {
  title: 'Complete OpenDNS Setup Walkthrough',
  description:
    'Step-by-step tutorial for setting up OpenDNS FamilyShield or creating a custom account with filtering categories, statistics, and advanced features.',
};
---

<GuideLayout
  metadata={metadata}
  difficulty="beginner"
  timeEstimate="30-45 minutes"
  prerequisites={[
    'Access to router admin panel OR device network settings',
    'Internet connection',
    'Email address for OpenDNS account (for custom filtering)',
    'Willingness to experiment',
  ]}
>
  <Fragment slot="breadcrumb">
    <li class="flex items-center">
      <a href="/" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"> Home </a>
      <span class="mx-2 text-gray-500">/</span>
    </li>
    <li class="flex items-center">
      <a href="/methods" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
        Protection Methods
      </a>
      <span class="mx-2 text-gray-500">/</span>
    </li>
    <li class="text-gray-700 dark:text-gray-300">Complete OpenDNS Walkthrough</li>
  </Fragment>

  <section>
    <h2>What This Tutorial Covers</h2>
    <p>
      OpenDNS (now part of Cisco Umbrella) offers free DNS-based content filtering that's easy to set up and works
      across all devices on your network. This tutorial walks you through both the simple FamilyShield option (no
      account needed) and the customizable Home account (free, requires registration). By the end, you'll have
      network-level filtering protecting your family.
    </p>

    <div class="alert alert-info">
      <strong>Two Options:</strong> FamilyShield (pre-configured, 5-minute setup) OR OpenDNS Home (customizable, 15-30 minute
      setup with free account). This guide covers both.
    </div>
  </section>

  <section>
    <h2>üéØ Option 1: OpenDNS FamilyShield (Simple)</h2>
    <p><strong>Best for:</strong> Quick setup, no customization needed, family-friendly defaults</p>

    <h3>What FamilyShield Blocks (Pre-Configured)</h3>
    <ul>
      <li>Adult content (pornography)</li>
      <li>Tasteless content</li>
      <li>Proxy/anonymizer sites</li>
      <li>Phishing and malware sites</li>
    </ul>

    <h3>FamilyShield DNS Addresses</h3>
    <div class="dns-box">
      <p><strong>Primary DNS:</strong> <code>208.67.222.123</code></p>
      <p><strong>Secondary DNS:</strong> <code>208.67.220.123</code></p>
    </div>

    <h3>Quick Setup (Router Level - Protects Whole Network)</h3>
    <ol>
      <li>Open web browser, type router IP address: <code>192.168.1.1</code> or <code>192.168.0.1</code></li>
      <li>Log in with admin username/password (check router sticker if unknown)</li>
      <li>Find DNS settings (usually under: Internet, WAN, Network, or DHCP Settings)</li>
      <li>
        Change DNS servers to:
        <ul>
          <li>Primary: <code>208.67.222.123</code></li>
          <li>Secondary: <code>208.67.220.123</code></li>
        </ul>
      </li>
      <li>Save settings and restart router</li>
      <li>Restart devices or disconnect/reconnect from WiFi</li>
    </ol>

    <h3>Test It's Working</h3>
    <ol>
      <li>
        Visit <a href="https://welcome.opendns.com" target="_blank" rel="noopener">welcome.opendns.com</a> - Should say "Welcome!
        You are using OpenDNS"
      </li>
      <li>Try visiting a test blocked site (OpenDNS will show block page)</li>
    </ol>

    <p><strong>Done!</strong> That's it for FamilyShield. For customization, continue to Option 2.</p>
  </section>

  <section>
    <h2>üéØ Option 2: OpenDNS Home (Customizable, Free)</h2>
    <p><strong>Best for:</strong> Want to customize filtering, view statistics, manage multiple locations</p>

    <h3>Step 1: Create Free OpenDNS Home Account</h3>
    <ol>
      <li>
        Go to <a href="https://signup.opendns.com/homefree/" target="_blank" rel="noopener"
          >signup.opendns.com/homefree/</a
        >
      </li>
      <li>Enter your email address</li>
      <li>Create a password (save this!)</li>
      <li>Agree to terms and click "Create My Account"</li>
      <li>Check email for verification link</li>
      <li>Click verification link to confirm</li>
    </ol>

    <h3>Step 2: Add Your Network</h3>
    <ol>
      <li>After logging in, you'll be at the Dashboard</li>
      <li>Click "Add this network" button</li>
      <li>OpenDNS will auto-detect your public IP address</li>
      <li>Give your network a name (e.g., "Home" or "Family WiFi")</li>
      <li>Click "Add Network"</li>
    </ol>

    <div class="alert alert-info">
      <strong>Dynamic IP?</strong> Most home internet has dynamic (changing) IP. OpenDNS provides a free "Dynamic DNS" updater
      to keep your IP current. We'll set this up later.
    </div>

    <h3>Step 3: Configure Router DNS</h3>
    <p>Now configure your router to use OpenDNS servers (NOT FamilyShield addresses this time):</p>

    <div class="dns-box">
      <p><strong>OpenDNS Home DNS Addresses:</strong></p>
      <p><strong>Primary:</strong> <code>208.67.222.222</code></p>
      <p><strong>Secondary:</strong> <code>208.67.220.220</code></p>
    </div>

    <ol>
      <li>Access your router admin panel (<code>192.168.1.1</code> or <code>192.168.0.1</code>)</li>
      <li>Find DNS settings</li>
      <li>
        Change to:
        <ul>
          <li>Primary: <code>208.67.222.222</code></li>
          <li>Secondary: <code>208.67.220.220</code></li>
        </ul>
      </li>
      <li>Save and restart router</li>
    </ol>

    <h3>Step 4: Verify Connection</h3>
    <ol>
      <li>Back in OpenDNS Dashboard, click your network name</li>
      <li>Look for green "Active" status</li>
      <li>
        Visit <a href="https://welcome.opendns.com" target="_blank" rel="noopener">welcome.opendns.com</a> to confirm
      </li>
    </ol>
  </section>

  <section>
    <h2>‚öôÔ∏è Customizing Filtering (OpenDNS Home)</h2>

    <h3>Step 5: Choose Filtering Level</h3>
    <ol>
      <li>In Dashboard, click "Settings" tab</li>
      <li>Click "Web Content Filtering"</li>
      <li>
        Choose a preset level:
        <ul>
          <li><strong>None:</strong> Security only (blocks malware/phishing, no content filtering)</li>
          <li><strong>Low:</strong> Blocks mature content</li>
          <li><strong>Moderate:</strong> Blocks mature content and some other categories</li>
          <li><strong>High:</strong> Blocks extensive categories including social media, video sharing</li>
          <li><strong>Custom:</strong> Choose exactly what to block (recommended)</li>
        </ul>
      </li>
    </ol>

    <h3>Step 6: Customize Categories (Recommended Approach)</h3>
    <ol>
      <li>Select "Custom" filtering level</li>
      <li>Scroll through 65+ categories</li>
      <li>
        Check categories you want to BLOCK. Common recommendations:
        <ul>
          <li>‚úÖ Pornography</li>
          <li>‚úÖ Sexuality</li>
          <li>‚úÖ Tasteless</li>
          <li>‚úÖ Nudity</li>
          <li>‚úÖ Lingerie/Swimsuit</li>
          <li>‚úÖ Proxy/Anonymizer</li>
          <li>‚úÖ Adware</li>
          <li>‚úÖ Phishing</li>
          <li>Consider: Gambling, Social Networking, Video Sharing (depends on your needs)</li>
        </ul>
      </li>
      <li>Click "Apply" at bottom of page</li>
    </ol>

    <div class="alert alert-warning">
      <strong>Important:</strong> Be careful blocking too many categories. "Social Networking" blocks Facebook/Instagram
      (might be needed for work). "Video Sharing" blocks YouTube (educational value). Start conservative, add categories
      if needed.
    </div>

    <h3>Step 7: Manage Individual Domains</h3>
    <p>Block or allow specific websites beyond category filtering:</p>

    <h4>To Block Specific Site:</h4>
    <ol>
      <li>Settings ‚Üí "Manage Individual Domains"</li>
      <li>Under "Always Block," enter domain (e.g., <code>example.com</code>)</li>
      <li>Click "Add Domain"</li>
    </ol>

    <h4>To Allow Specific Site (Override Filtering):</h4>
    <ol>
      <li>Under "Never Block," enter domain</li>
      <li>Click "Add Domain"</li>
      <li>Useful if filtering blocks legitimate site</li>
    </ol>
  </section>

  <section>
    <h2>üìä Viewing Statistics & Reports</h2>

    <h3>What You Can See</h3>
    <ul>
      <li><strong>Total Requests:</strong> Number of DNS lookups</li>
      <li><strong>Unique Domains:</strong> How many different sites accessed</li>
      <li><strong>Blocked Domains:</strong> What was filtered</li>
      <li><strong>Top Domains:</strong> Most visited sites</li>
      <li><strong>Block Categories:</strong> Which categories triggered most blocks</li>
      <li><strong>Requests Over Time:</strong> Graph showing usage patterns</li>
    </ul>

    <h3>Accessing Stats</h3>
    <ol>
      <li>Dashboard ‚Üí Click your network name</li>
      <li>Click "Stats" tab</li>
      <li>Choose time range (Last hour, Today, Last 7 days, Last 30 days)</li>
      <li>Review blocked requests to see what's being filtered</li>
    </ol>

    <h3>What Stats Tell You</h3>
    <ul>
      <li>Lots of blocked pornography requests? Someone's testing the limits</li>
      <li>Proxy site blocks? Someone trying to bypass filtering</li>
      <li>Legitimate sites being blocked? Add to "Never Block" list</li>
      <li>High usage at night? Adjust schedule or have conversation</li>
    </ul>
  </section>

  <section>
    <h2>üîÑ Dynamic IP Address Updater</h2>
    <p>If your home IP address changes, OpenDNS needs to know your new IP. Options:</p>

    <h3>Option A: Built-in Router Support (Easiest)</h3>
    <p>Some routers have OpenDNS Dynamic DNS built in:</p>
    <ol>
      <li>Check your router settings for "Dynamic DNS" or "DDNS"</li>
      <li>Select "OpenDNS" as provider</li>
      <li>Enter your OpenDNS username and password</li>
      <li>Router will automatically update your IP</li>
    </ol>

    <h3>Option B: OpenDNS Dynamic IP Client (Windows/Mac)</h3>
    <ol>
      <li>
        Download from <a href="https://support.opendns.com/hc/en-us/articles/227987727" target="_blank" rel="noopener"
          >OpenDNS support site</a
        >
      </li>
      <li>Install on a computer that's always on</li>
      <li>Enter your OpenDNS credentials</li>
      <li>Client runs in background, updates IP automatically</li>
    </ol>

    <h3>Option C: Manual Check (Not Recommended)</h3>
    <ol>
      <li>OpenDNS Dashboard ‚Üí Settings ‚Üí "Update Network"</li>
      <li>Manually click when you notice filtering stopped working</li>
      <li>Only viable if IP rarely changes</li>
    </ol>
  </section>

  <section>
    <h2>üì± Device-Level Setup (For Mobile Protection)</h2>
    <p>Router-level DNS only works on your home network. Configure devices for protection when away:</p>

    <h3>iPhone/iPad (iOS)</h3>
    <ol>
      <li>Settings ‚Üí WiFi</li>
      <li>Tap (i) next to your network</li>
      <li>Scroll to "Configure DNS"</li>
      <li>Tap "Manual"</li>
      <li>Remove existing DNS servers</li>
      <li>Add Server: <code>208.67.222.222</code></li>
      <li>Add Server: <code>208.67.220.220</code></li>
      <li>Tap "Save"</li>
    </ol>
    <p><em>Note: Must repeat for cellular data and each WiFi network</em></p>

    <h3>Android</h3>
    <ol>
      <li>Settings ‚Üí Network & Internet (or Connections)</li>
      <li>WiFi ‚Üí Long-press your network ‚Üí Modify Network</li>
      <li>Advanced Options ‚Üí IP Settings: Static</li>
      <li>DNS 1: <code>208.67.222.222</code></li>
      <li>DNS 2: <code>208.67.220.220</code></li>
      <li>Save</li>
    </ol>
    <p><strong>Android 9+ Alternative (Private DNS):</strong></p>
    <ul>
      <li>Settings ‚Üí Network & Internet ‚Üí Private DNS</li>
      <li>Select "Private DNS provider hostname"</li>
      <li>Enter: <code>family-filter.opendns.com</code> (for FamilyShield)</li>
      <li>This works on cellular too!</li>
    </ul>
  </section>

  <section>
    <h2>‚ùì Troubleshooting Common Issues</h2>

    <div class="troubleshooting">
      <h3>Issue: Filtering not working</h3>
      <p><strong>Symptoms:</strong> Inappropriate sites load fine, welcome.opendns.com doesn't recognize you</p>
      <p><strong>Solutions:</strong></p>
      <ul>
        <li>Verify DNS addresses entered correctly in router</li>
        <li>Restart router after changing DNS</li>
        <li>
          Flush DNS cache on device:
          <ul>
            <li>Windows: <code>ipconfig /flushdns</code></li>
            <li>Mac: <code>sudo dscacheutil -flushcache</code></li>
            <li>Or simply restart device</li>
          </ul>
        </li>
        <li>Check if IP address changed (Dashboard shows network inactive)</li>
        <li>Ensure no other DNS servers configured (some devices override router DNS)</li>
      </ul>
    </div>

    <div class="troubleshooting">
      <h3>Issue: Legitimate sites blocked</h3>
      <p><strong>Symptoms:</strong> Educational, health, or work sites showing block page</p>
      <p><strong>Solutions:</strong></p>
      <ul>
        <li>Add site to "Never Block" list in Settings</li>
        <li>Review which category is blocking it (adjust if needed)</li>
        <li>Report miscategorization to OpenDNS</li>
        <li>Consider using less restrictive filtering level</li>
      </ul>
    </div>

    <div class="troubleshooting">
      <h3>Issue: Stats not updating</h3>
      <p><strong>Symptoms:</strong> Dashboard shows 0 requests or outdated data</p>
      <p><strong>Solutions:</strong></p>
      <ul>
        <li>Verify network shows "Active" status</li>
        <li>Wait 5-10 minutes (stats update periodically)</li>
        <li>Check IP address is current</li>
        <li>Ensure devices are using OpenDNS (not Google DNS or ISP DNS)</li>
      </ul>
    </div>

    <div class="troubleshooting">
      <h3>Issue: Someone bypassing with VPN</h3>
      <p><strong>Symptoms:</strong> Tech-savvy user accessing blocked content via VPN app</p>
      <p><strong>Solutions:</strong></p>
      <ul>
        <li>Block VPN ports at firewall (requires advanced router)</li>
        <li>Use parental controls to block VPN apps from installing</li>
        <li>Have conversation about WHY filtering exists</li>
        <li>Accept that no system is perfect - focus on protecting most users</li>
      </ul>
    </div>
  </section>

  <section>
    <h2>üí° Pro Tips & Advanced Features</h2>

    <h3>Multiple Locations</h3>
    <ul>
      <li>Add multiple networks (home, vacation home, office)</li>
      <li>Each can have different filtering settings</li>
      <li>Track usage at each location separately</li>
    </ul>

    <h3>Custom Block Page</h3>
    <ul>
      <li>Settings ‚Üí "Customization"</li>
      <li>Add custom message to block page</li>
      <li>
        Useful: "This content doesn't align with our family values. If you think this is a mistake, talk to Dad/Mom."
      </li>
    </ul>

    <h3>Filtering Schedule (Paid Feature)</h3>
    <p>OpenDNS Home VIP ($20/year) adds scheduling:</p>
    <ul>
      <li>Different filtering levels at different times</li>
      <li>Example: Lighter filtering during school hours, heavier in evening</li>
      <li>Bedtime internet shutdown</li>
    </ul>

    <h3>Email Reports (Paid Feature)</h3>
    <ul>
      <li>Weekly or monthly usage reports sent to email</li>
      <li>Convenient alternative to logging in</li>
    </ul>
  </section>

  <section>
    <h2>üìã Quick Reference Card</h2>

    <div class="bg-gray-50 dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6 mb-6">
      <h3>OpenDNS DNS Addresses</h3>
      <p><strong>FamilyShield (Pre-configured):</strong></p>
      <ul>
        <li>Primary: <code>208.67.222.123</code></li>
        <li>Secondary: <code>208.67.220.123</code></li>
      </ul>

      <p><strong>OpenDNS Home (Customizable):</strong></p>
      <ul>
        <li>Primary: <code>208.67.222.222</code></li>
        <li>Secondary: <code>208.67.220.220</code></li>
      </ul>

      <p><strong>Useful Links:</strong></p>
      <ul>
        <li>
          Dashboard: <a href="https://dashboard.opendns.com" target="_blank" rel="noopener">dashboard.opendns.com</a>
        </li>
        <li>
          Welcome page: <a href="https://welcome.opendns.com" target="_blank" rel="noopener">welcome.opendns.com</a>
        </li>
        <li>Support: <a href="https://support.opendns.com" target="_blank" rel="noopener">support.opendns.com</a></li>
      </ul>
    </div>
  </section>

  <section slot="next-steps">
    <h2>üéØ Next Steps</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-6">
      <a
        href="/guides/router-config"
        class="bg-gray-50 dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6 mb-6"
      >
        <h3>üîß Router Configuration</h3>
        <p>Add time limits and device management beyond DNS filtering</p>
      </a>

      <a
        href="/guides/ios-screen-time"
        class="bg-gray-50 dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6 mb-6"
      >
        <h3>üì± iOS Screen Time</h3>
        <p>Add device-level controls for iPhones and iPads</p>
      </a>

      <a
        href="/guides/android-family-link"
        class="bg-gray-50 dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6 mb-6"
      >
        <h3>ü§ñ Android Family Link</h3>
        <p>Set up parental controls on Android devices</p>
      </a>

      <a
        href="/methods"
        class="bg-gray-50 dark:bg-gray-800 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6 mb-6"
      >
        <h3>üìö All Protection Methods</h3>
        <p>Explore other filtering and monitoring solutions</p>
      </a>
    </div>

    <div class="alert alert-success">
      <strong>Congratulations!</strong> You've set up network-level content filtering. Remember: DNS filtering is layer one.
      Combine with device parental controls and ongoing education for complete protection.
    </div>
  </section>
</GuideLayout>

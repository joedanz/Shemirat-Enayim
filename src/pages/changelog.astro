---
import Layout from '../layouts/Layout.astro';
import Breadcrumb from '../components/Breadcrumb.astro';
import Alert from '../components/Alert.astro';

const updates = [
	{
		version: 'v1.5.0',
		date: '2025-09-30',
		changes: [
			{ type: 'new', text: 'Added comprehensive FAQ section with 36+ questions across 4 categories' },
			{ type: 'new', text: 'Created 5 detailed troubleshooting guides for common filtering issues' },
			{ type: 'new', text: 'Implemented site-wide search functionality with keyboard shortcuts' },
			{ type: 'new', text: 'Added printable quick-reference cards (DNS servers, screen time limits)' },
			{ type: 'new', text: 'Created emergency contact resources page with crisis hotlines' },
			{ type: 'new', text: 'Added feedback form for bug reports and suggestions' },
			{ type: 'new', text: 'Implemented newsletter signup component in footer' }
		]
	},
	{
		version: 'v1.4.0',
		date: '2025-09-29',
		changes: [
			{ type: 'new', text: 'Created 18 detailed guides for parents and religious leaders' },
			{ type: 'new', text: 'Added age-appropriate internet introduction guide' },
			{ type: 'new', text: 'Published social media safety guide covering Instagram, TikTok, Snapchat, Discord' },
			{ type: 'new', text: 'Added gaming safety guide with console-specific controls' },
			{ type: 'new', text: 'Created cyberbullying prevention and response guide' },
			{ type: 'new', text: 'Added screen time management strategies guide' },
			{ type: 'new', text: 'Published education vs entertainment balance guide' }
		]
	},
	{
		version: 'v1.3.0',
		date: '2025-09-28',
		changes: [
			{ type: 'new', text: 'Created 15 comprehensive protection method guides' },
			{ type: 'new', text: 'Added DNS filtering setup guide with provider comparisons' },
			{ type: 'new', text: 'Published router configuration guide for major brands' },
			{ type: 'new', text: 'Created firewall setup guide for pfSense and OPNsense' },
			{ type: 'new', text: 'Added guest network setup guide' },
			{ type: 'new', text: 'Published iOS Screen Time complete setup guide' },
			{ type: 'new', text: 'Created Android Family Link configuration guide' },
			{ type: 'new', text: 'Added Windows Family Safety guide' },
			{ type: 'new', text: 'Published macOS parental controls guide' },
			{ type: 'new', text: 'Created gaming console safety guide (PlayStation, Xbox, Switch)' },
			{ type: 'new', text: 'Added smart TV and streaming device protection guide' },
			{ type: 'new', text: 'Published filtering software comparison guide' },
			{ type: 'new', text: 'Created accountability apps guide' },
			{ type: 'new', text: 'Added browser extensions guide' },
			{ type: 'new', text: 'Published YouTube filtering methods guide' },
			{ type: 'new', text: 'Created SafeSearch setup guide' }
		]
	},
	{
		version: 'v1.2.0',
		date: '2025-09-27',
		changes: [
			{ type: 'new', text: 'Created main section pages (Parents, Leaders, Individuals)' },
			{ type: 'new', text: 'Added comprehensive protection methods catalog' },
			{ type: 'new', text: 'Created resources hub page' },
			{ type: 'new', text: 'Added About and Contact pages' },
			{ type: 'update', text: 'Improved navigation with dropdown menus' },
			{ type: 'update', text: 'Added mobile-responsive hamburger menu' }
		]
	},
	{
		version: 'v1.1.0',
		date: '2025-09-26',
		changes: [
			{ type: 'new', text: 'Created reusable component library (Button, Card, Hero, Alert, Stats)' },
			{ type: 'new', text: 'Added Breadcrumb navigation with schema.org markup' },
			{ type: 'new', text: 'Created Table of Contents component with scroll highlighting' },
			{ type: 'new', text: 'Implemented ContentLayout and GuideLayout templates' },
			{ type: 'update', text: 'Established design system with CSS variables' }
		]
	},
	{
		version: 'v1.0.0',
		date: '2025-09-25',
		changes: [
			{ type: 'new', text: 'Initial site launch with homepage' },
			{ type: 'new', text: 'Created Header and Footer components' },
			{ type: 'new', text: 'Implemented base Layout with SEO meta tags' },
			{ type: 'new', text: 'Set up Astro project configuration' },
			{ type: 'new', text: 'Added custom favicon' }
		]
	}
];

const changeTypeLabels = {
	new: { label: 'New', color: 'var(--color-secondary-600)' },
	update: { label: 'Updated', color: 'var(--color-primary-600)' },
	fix: { label: 'Fixed', color: 'var(--color-warning)' }
};
---

<Layout
	title="Changelog - Shemirat Enayim"
	description="View the latest updates, new features, and improvements to Shemirat Enayim."
>
	<Breadcrumb />

	<div class="max-w-4xl mx-auto px-4 py-8">
		<header class="text-center mb-8">
			<h1 class="text-4xl font-extrabold text-gray-900 mb-3">Changelog</h1>
			<p class="text-xl text-gray-600 leading-relaxed">
				Track new features, content updates, and improvements to our internet safety resources.
			</p>
		</header>

		<Alert type="info">
			<strong>Subscribe for updates:</strong> Get notified when we publish new guides and features.
			<a href="#newsletter">Subscribe to our newsletter</a> or <a href="/rss.xml">subscribe via RSS</a>.
		</Alert>

		<div class="updates-timeline">
			{updates.map((update) => (
				<article class="update-entry">
					<div class="update-header">
						<div class="update-meta">
							<span class="update-version">{update.version}</span>
							<time class="update-date" datetime={update.date}>
								{new Date(update.date).toLocaleDateString('en-US', {
									year: 'numeric',
									month: 'long',
									day: 'numeric'
								})}
							</time>
						</div>
					</div>

					<div class="update-content">
						<ul class="changes-list">
							{update.changes.map((change) => {
								const typeInfo = changeTypeLabels[change.type as keyof typeof changeTypeLabels];
								return (
									<li class="change-item">
										<span
											class="change-badge"
											style={`background-color: ${typeInfo.color}`}
										>
											{typeInfo.label}
										</span>
										<span class="change-text">{change.text}</span>
									</li>
								);
							})}
						</ul>
					</div>
				</article>
			))}
		</div>

		<section class="subscription-section" id="newsletter">
			<h2>Stay Informed</h2>
			<p>
				Never miss an update. Subscribe to our newsletter for monthly summaries of new content, platform changes,
				and online safety tips.
			</p>
			<div class="subscription-cta">
				<a href="#newsletter" class="btn-newsletter">Subscribe to Newsletter</a>
				<a href="/rss.xml" class="btn-rss">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M4 11a9 9 0 0 1 9 9"></path>
						<path d="M4 4a16 16 0 0 1 16 16"></path>
						<circle cx="5" cy="19" r="1"></circle>
					</svg>
					RSS Feed
				</a>
			</div>
		</section>

		<section class="feedback-section">
			<h2>Have Feedback?</h2>
			<p>
				Help us improve by reporting bugs, requesting features, or suggesting content improvements.
			</p>
			<a href="/feedback" class="btn-feedback">Submit Feedback</a>
		</section>
	</div>
</Layout>

<style>
	.changelog-container {
		max-width: 900px;
		margin: 0 auto;
		padding: var(--space-8) var(--space-4);
	}

	.changelog-header {
		text-align: center;
		margin-bottom: var(--space-8);
	}

	.changelog-header h1 {
		font-size: var(--text-4xl);
		font-weight: 800;
		color: var(--color-gray-900);
		margin-bottom: var(--space-3);
	}

	.subtitle {
		font-size: var(--text-xl);
		color: var(--color-gray-600);
		line-height: var(--leading-relaxed);
	}

	/* Timeline */
	.updates-timeline {
		margin-top: var(--space-10);
		position: relative;
	}

	.updates-timeline::before {
		content: '';
		position: absolute;
		left: 30px;
		top: 0;
		bottom: 0;
		width: 2px;
		background: linear-gradient(to bottom, var(--color-primary-500), var(--color-secondary-500));
	}

	.update-entry {
		position: relative;
		padding-left: var(--space-20);
		margin-bottom: var(--space-10);
	}

	.update-entry::before {
		content: '';
		position: absolute;
		left: 22px;
		top: 6px;
		width: 18px;
		height: 18px;
		border-radius: 50%;
		background-color: var(--color-primary-600);
		border: 3px solid white;
		box-shadow: 0 0 0 2px var(--color-primary-600);
		z-index: 1;
	}

	.update-header {
		margin-bottom: var(--space-4);
	}

	.update-meta {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		flex-wrap: wrap;
	}

	.update-version {
		font-size: var(--text-2xl);
		font-weight: 700;
		color: var(--color-gray-900);
		font-family: monospace;
	}

	.update-date {
		font-size: var(--text-base);
		color: var(--color-gray-500);
	}

	.update-content {
		background: white;
		border: 2px solid var(--color-gray-200);
		border-radius: var(--radius-xl);
		padding: var(--space-6);
		box-shadow: var(--shadow-sm);
	}

	.changes-list {
		list-style: none;
		padding: 0;
		margin: 0;
		display: flex;
		flex-direction: column;
		gap: var(--space-3);
	}

	.change-item {
		display: flex;
		align-items: flex-start;
		gap: var(--space-3);
	}

	.change-badge {
		display: inline-block;
		padding: 0.25rem 0.625rem;
		border-radius: var(--radius-full);
		font-size: var(--text-xs);
		font-weight: 700;
		color: white;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		flex-shrink: 0;
	}

	.change-text {
		color: var(--color-gray-700);
		line-height: var(--leading-relaxed);
		flex: 1;
	}

	/* Subscription Section */
	.subscription-section {
		margin-top: var(--space-16);
		padding: var(--space-10);
		background: linear-gradient(135deg, var(--color-primary-50) 0%, var(--color-secondary-50) 100%);
		border-radius: var(--radius-xl);
		text-align: center;
	}

	.subscription-section h2 {
		font-size: var(--text-3xl);
		font-weight: 700;
		color: var(--color-gray-900);
		margin-bottom: var(--space-3);
	}

	.subscription-section p {
		font-size: var(--text-lg);
		color: var(--color-gray-600);
		line-height: var(--leading-relaxed);
		margin-bottom: var(--space-6);
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
	}

	.subscription-cta {
		display: flex;
		gap: var(--space-3);
		justify-content: center;
		flex-wrap: wrap;
	}

	.btn-newsletter,
	.btn-rss {
		display: inline-flex;
		align-items: center;
		gap: var(--space-2);
		padding: var(--space-3) var(--space-6);
		border-radius: var(--radius-lg);
		font-weight: 600;
		text-decoration: none;
		transition: all var(--transition-base);
	}

	.btn-newsletter {
		background-color: var(--color-primary-600);
		color: white;
	}

	.btn-newsletter:hover {
		background-color: var(--color-primary-700);
		transform: translateY(-2px);
		box-shadow: var(--shadow-lg);
		text-decoration: none;
	}

	.btn-rss {
		background-color: white;
		color: var(--color-primary-600);
		border: 2px solid var(--color-primary-600);
	}

	.btn-rss:hover {
		background-color: var(--color-primary-50);
		transform: translateY(-2px);
		box-shadow: var(--shadow-lg);
		text-decoration: none;
	}

	/* Feedback Section */
	.feedback-section {
		margin-top: var(--space-12);
		padding: var(--space-8);
		background-color: var(--color-gray-50);
		border-radius: var(--radius-xl);
		text-align: center;
	}

	.feedback-section h2 {
		font-size: var(--text-2xl);
		font-weight: 700;
		color: var(--color-gray-900);
		margin-bottom: var(--space-3);
	}

	.feedback-section p {
		font-size: var(--text-lg);
		color: var(--color-gray-600);
		margin-bottom: var(--space-6);
	}

	.btn-feedback {
		display: inline-block;
		padding: var(--space-3) var(--space-6);
		background-color: var(--color-secondary-600);
		color: white;
		border-radius: var(--radius-lg);
		font-weight: 600;
		text-decoration: none;
		transition: all var(--transition-base);
	}

	.btn-feedback:hover {
		background-color: var(--color-secondary-700);
		transform: translateY(-2px);
		box-shadow: var(--shadow-lg);
		text-decoration: none;
	}

	@media (max-width: 768px) {
		.changelog-header h1 {
			font-size: var(--text-3xl);
		}

		.updates-timeline::before {
			left: 15px;
		}

		.update-entry {
			padding-left: var(--space-12);
		}

		.update-entry::before {
			left: 7px;
		}

		.update-version {
			font-size: var(--text-xl);
		}

		.subscription-cta {
			flex-direction: column;
		}

		.btn-newsletter,
		.btn-rss {
			width: 100%;
			justify-content: center;
		}
	}
</style>

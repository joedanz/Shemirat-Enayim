---
interface Props {
	title?: string;
	description?: string;
	image?: string;
}

const {
	title = 'Shemirat Enayim - Protection for the Eyes',
	description = 'Comprehensive resources for parents, religious leaders, and individuals to protect their networks from inappropriate content through content filtering and internet safety solutions.',
	image = '/og-image.svg'
} = Astro.props;

const canonicalURL = Astro.site ? new URL(Astro.url.pathname, Astro.site) : undefined;
const ogImageURL = Astro.site ? new URL(image, Astro.site) : undefined;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Preconnect to CDNs for faster resource loading -->
		<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

		<!-- Favicon -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

		{canonicalURL && <link rel="canonical" href={canonicalURL} />}
		<meta name="generator" content={Astro.generator} />

		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="keywords" content="internet safety, content filtering, parental controls, DNS filtering, network protection, web filtering, family safety, screen time" />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		{canonicalURL && <meta property="og:url" content={canonicalURL} />}
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		{ogImageURL && <meta property="og:image" content={ogImageURL} />}

		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		{canonicalURL && <meta property="twitter:url" content={canonicalURL} />}
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		{ogImageURL && <meta property="twitter:image" content={ogImageURL} />}

		<!-- Theme Color -->
		<meta name="theme-color" content="#2563eb" />
	</head>
	<body>
		<noscript>
			<div style="background: #fef08a; border: 2px solid #ca8a04; padding: 1rem; text-align: center; font-weight: 600;">
				⚠️ Some features require JavaScript. For the best experience, please enable JavaScript in your browser.
			</div>
		</noscript>
		<slot />
	</body>
</html>

<style is:global>
	/* CSS Reset & Base Styles */
	*,
	*::before,
	*::after {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	/* CSS Variables / Design Tokens */
	:root {
		/* Colors - Primary (Trust/Protection - Blue) */
		--color-primary-50: #eff6ff;
		--color-primary-100: #dbeafe;
		--color-primary-200: #bfdbfe;
		--color-primary-300: #93c5fd;
		--color-primary-400: #60a5fa;
		--color-primary-500: #3b82f6;
		--color-primary-600: #2563eb;
		--color-primary-700: #1d4ed8;
		--color-primary-800: #1e40af;
		--color-primary-900: #1e3a8a;

		/* Colors - Secondary (Warmth/Family - Green) */
		--color-secondary-50: #f0fdf4;
		--color-secondary-100: #dcfce7;
		--color-secondary-200: #bbf7d0;
		--color-secondary-300: #86efac;
		--color-secondary-400: #4ade80;
		--color-secondary-500: #22c55e;
		--color-secondary-600: #16a34a;
		--color-secondary-700: #15803d;
		--color-secondary-800: #166534;
		--color-secondary-900: #14532d;

		/* Colors - Neutrals */
		--color-gray-50: #f9fafb;
		--color-gray-100: #f3f4f6;
		--color-gray-200: #e5e7eb;
		--color-gray-300: #d1d5db;
		--color-gray-400: #9ca3af;
		--color-gray-500: #6b7280;
		--color-gray-600: #4b5563;
		--color-gray-700: #374151;
		--color-gray-800: #1f2937;
		--color-gray-900: #111827;

		/* Colors - Semantic */
		--color-success: #22c55e;
		--color-warning: #f59e0b;
		--color-error: #ef4444;
		--color-info: #3b82f6;

		/* Typography - Font Families */
		--font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
		--font-serif: Georgia, 'Times New Roman', serif;
		--font-mono: 'Monaco', 'Courier New', monospace;

		/* Typography - Font Sizes */
		--text-xs: 0.75rem;      /* 12px */
		--text-sm: 0.875rem;     /* 14px */
		--text-base: 1rem;       /* 16px */
		--text-lg: 1.125rem;     /* 18px */
		--text-xl: 1.25rem;      /* 20px */
		--text-2xl: 1.5rem;      /* 24px */
		--text-3xl: 1.875rem;    /* 30px */
		--text-4xl: 2.25rem;     /* 36px */
		--text-5xl: 3rem;        /* 48px */
		--text-6xl: 3.75rem;     /* 60px */

		/* Typography - Line Heights */
		--leading-none: 1;
		--leading-tight: 1.25;
		--leading-snug: 1.375;
		--leading-normal: 1.5;
		--leading-relaxed: 1.625;
		--leading-loose: 2;

		/* Spacing Scale */
		--space-0: 0;
		--space-1: 0.25rem;      /* 4px */
		--space-2: 0.5rem;       /* 8px */
		--space-3: 0.75rem;      /* 12px */
		--space-4: 1rem;         /* 16px */
		--space-5: 1.25rem;      /* 20px */
		--space-6: 1.5rem;       /* 24px */
		--space-8: 2rem;         /* 32px */
		--space-10: 2.5rem;      /* 40px */
		--space-12: 3rem;        /* 48px */
		--space-16: 4rem;        /* 64px */
		--space-20: 5rem;        /* 80px */
		--space-24: 6rem;        /* 96px */

		/* Border Radius */
		--radius-sm: 0.125rem;   /* 2px */
		--radius-base: 0.25rem;  /* 4px */
		--radius-md: 0.375rem;   /* 6px */
		--radius-lg: 0.5rem;     /* 8px */
		--radius-xl: 0.75rem;    /* 12px */
		--radius-2xl: 1rem;      /* 16px */
		--radius-full: 9999px;

		/* Shadows */
		--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
		--shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
		--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
		--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
		--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
		--shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);

		/* Breakpoints (for reference in JS) */
		--breakpoint-sm: 640px;
		--breakpoint-md: 768px;
		--breakpoint-lg: 1024px;
		--breakpoint-xl: 1280px;
		--breakpoint-2xl: 1536px;

		/* Transitions */
		--transition-fast: 150ms;
		--transition-base: 200ms;
		--transition-slow: 300ms;
		--transition-slower: 500ms;

		/* Z-Index Scale */
		--z-dropdown: 1000;
		--z-sticky: 1100;
		--z-fixed: 1200;
		--z-modal: 1300;
		--z-popover: 1400;
		--z-tooltip: 1500;
	}

	/* High Contrast Mode */
	[data-contrast="high"] {
		/* High contrast colors - WCAG AAA compliant */
		--color-primary-50: #ffffff;
		--color-primary-100: #e0e7ff;
		--color-primary-200: #c7d2fe;
		--color-primary-300: #a5b4fc;
		--color-primary-400: #818cf8;
		--color-primary-500: #000080;
		--color-primary-600: #000060;
		--color-primary-700: #000050;
		--color-primary-800: #000040;
		--color-primary-900: #000030;

		--color-gray-50: #ffffff;
		--color-gray-100: #f5f5f5;
		--color-gray-200: #e0e0e0;
		--color-gray-300: #cccccc;
		--color-gray-400: #999999;
		--color-gray-500: #666666;
		--color-gray-600: #333333;
		--color-gray-700: #1a1a1a;
		--color-gray-800: #0d0d0d;
		--color-gray-900: #000000;

		/* Enhanced shadows for better contrast */
		--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.15);
		--shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.2), 0 1px 2px -1px rgb(0 0 0 / 0.2);
		--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.2), 0 2px 4px -2px rgb(0 0 0 / 0.2);
		--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.2), 0 4px 6px -4px rgb(0 0 0 / 0.2);
		--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.2), 0 8px 10px -6px rgb(0 0 0 / 0.2);
		--shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.35);
	}

	[data-contrast="high"] {
		background-color: #ffffff;
	}

	[data-contrast="high"] body {
		background-color: #ffffff;
	}

	/* High contrast link styles */
	[data-contrast="high"] a {
		color: #000080;
		text-decoration: underline;
		font-weight: 600;
	}

	[data-contrast="high"] a:hover {
		color: #000060;
		text-decoration: underline;
	}

	[data-contrast="high"] a:focus-visible {
		outline: 3px solid #000000;
		outline-offset: 2px;
	}

	/* High contrast focus indicators */
	[data-contrast="high"] *:focus-visible {
		outline: 3px solid #000000 !important;
		outline-offset: 2px !important;
	}

	/* Enhanced borders */
	[data-contrast="high"] .card,
	[data-contrast="high"] button,
	[data-contrast="high"] input,
	[data-contrast="high"] textarea,
	[data-contrast="high"] select {
		border: 2px solid #000000 !important;
	}

	/* Base Typography */
	html {
		font-family: var(--font-sans);
		font-size: 16px;
		line-height: var(--leading-normal);
		color: var(--color-gray-900);
		background-color: var(--color-gray-50);
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}

	body {
		margin: 0;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	/* Typography Elements */
	h1, h2, h3, h4, h5, h6 {
		font-weight: 700;
		line-height: var(--leading-tight);
		color: var(--color-gray-900);
		margin-bottom: var(--space-4);
	}

	h1 { font-size: var(--text-4xl); }
	h2 { font-size: var(--text-3xl); }
	h3 { font-size: var(--text-2xl); }
	h4 { font-size: var(--text-xl); }
	h5 { font-size: var(--text-lg); }
	h6 { font-size: var(--text-base); }

	p {
		margin-bottom: var(--space-4);
		color: var(--color-gray-700);
	}

	a {
		color: var(--color-primary-600);
		text-decoration: none;
		transition: color var(--transition-base);
	}

	a:hover {
		color: var(--color-primary-700);
		text-decoration: underline;
	}

	/* Lists */
	ul, ol {
		margin-bottom: var(--space-4);
		padding-left: var(--space-6);
	}

	li {
		margin-bottom: var(--space-2);
		color: var(--color-gray-700);
	}

	/* Utility Classes */
	.container {
		width: 100%;
		max-width: 1280px;
		margin-left: auto;
		margin-right: auto;
		padding-left: var(--space-4);
		padding-right: var(--space-4);
	}

	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border-width: 0;
	}

	/* Responsive Typography */
	@media (min-width: 768px) {
		h1 { font-size: var(--text-5xl); }
		h2 { font-size: var(--text-4xl); }
		h3 { font-size: var(--text-3xl); }
	}

	@media (min-width: 1024px) {
		h1 { font-size: var(--text-6xl); }
	}

	/* Print Styles */
	@media print {
		* {
			-webkit-print-color-adjust: exact;
			print-color-adjust: exact;
		}

		/* Hide non-essential elements */
		header,
		footer,
		nav,
		.no-print,
		.search-bar,
		.search-modal,
		.newsletter-signup,
		.breadcrumb,
		button,
		.btn,
		.alert {
			display: none !important;
		}

		/* Page setup */
		@page {
			size: letter;
			margin: 0.75in;
		}

		body {
			font-size: 11pt;
			line-height: 1.5;
			color: #000;
			background: #fff;
		}

		/* Content optimization */
		main {
			width: 100%;
			max-width: none;
			padding: 0;
			margin: 0;
		}

		.container {
			max-width: none;
			padding: 0;
		}

		/* Typography for print */
		h1 {
			font-size: 22pt;
			page-break-after: avoid;
			margin-bottom: 12pt;
		}

		h2 {
			font-size: 18pt;
			page-break-after: avoid;
			margin-top: 18pt;
			margin-bottom: 10pt;
		}

		h3 {
			font-size: 14pt;
			page-break-after: avoid;
			margin-top: 14pt;
			margin-bottom: 8pt;
		}

		h4, h5, h6 {
			font-size: 12pt;
			page-break-after: avoid;
			margin-top: 12pt;
			margin-bottom: 6pt;
		}

		p {
			margin-bottom: 8pt;
			orphans: 3;
			widows: 3;
		}

		/* Links */
		a {
			color: #000;
			text-decoration: underline;
		}

		/* Show URLs after links */
		a[href^="http"]:after {
			content: " (" attr(href) ")";
			font-size: 9pt;
			color: #555;
		}

		/* Don't show URLs for internal links */
		a[href^="/"]:after {
			content: "";
		}

		/* Lists */
		ul, ol {
			page-break-inside: avoid;
			margin-bottom: 8pt;
		}

		li {
			margin-bottom: 4pt;
		}

		/* Tables */
		table {
			page-break-inside: avoid;
			border-collapse: collapse;
			width: 100%;
			margin-bottom: 12pt;
		}

		th, td {
			border: 1px solid #ddd;
			padding: 6pt 8pt;
			text-align: left;
		}

		th {
			background-color: #f5f5f5 !important;
			font-weight: bold;
		}

		/* Code blocks */
		pre, code {
			page-break-inside: avoid;
			background-color: #f5f5f5 !important;
			border: 1px solid #ddd !important;
			padding: 6pt;
			font-size: 9pt;
			font-family: 'Courier New', monospace;
		}

		/* Avoid breaking these elements */
		blockquote,
		figure,
		img,
		.card,
		.info-box {
			page-break-inside: avoid;
		}

		/* Images */
		img {
			max-width: 100% !important;
			height: auto !important;
		}

		/* Add page breaks */
		.page-break {
			page-break-before: always;
		}

		.page-break-after {
			page-break-after: always;
		}

		/* Print header with page URL */
		body::before {
			content: "Shemirat Enayim • " attr(data-page-title);
			display: block;
			font-size: 9pt;
			color: #666;
			border-bottom: 1px solid #ddd;
			padding-bottom: 6pt;
			margin-bottom: 18pt;
		}

		/* Print footer with page number */
		body::after {
			content: "Page " counter(page);
			display: block;
			position: fixed;
			bottom: 0;
			right: 0;
			font-size: 9pt;
			color: #666;
		}

		/* Remove box shadows and borders that waste ink */
		* {
			box-shadow: none !important;
			text-shadow: none !important;
		}

		/* Simplify backgrounds */
		* {
			background-image: none !important;
		}

		/* Keep essential backgrounds */
		.info-box,
		.alert,
		pre,
		code,
		th {
			background-color: #f5f5f5 !important;
		}
	}
</style>

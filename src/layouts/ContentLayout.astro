---
/**
 * ContentLayout - Shemirat Enayim
 * Standard content page layout with header, footer, breadcrumb, and optional sidebar
 * Features: Responsive grid, breadcrumb navigation, flexible sidebar slot
 */

import Layout from './Layout.astro';
import Header from '../components/shemirat/Header.astro';
import Footer from '../components/shemirat/Footer.astro';

interface Props {
	title: string;
	description?: string;
	publishDate?: string;
	image?: string;
}

const { title, description, publishDate, image } = Astro.props;
const currentPath = Astro.url.pathname;
---

<Layout title={title} description={description} image={image}>
	<Header currentPath={currentPath} />

	<main class="flex-1 py-8 md:py-12">
		<div class="container mx-auto px-4 sm:px-6 lg:px-8">
			<nav class="text-sm text-gray-600 dark:text-gray-400 mb-4" aria-label="Breadcrumb">
				<slot name="breadcrumb" />
			</nav>

			<div class="grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-8 lg:gap-12">
				<article class="max-w-full break-words">
					<header class="mb-8 pb-6 border-b border-gray-200 dark:border-gray-700">
						<h1 class="mb-4">{title}</h1>
						{publishDate && (
							<p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
								<time datetime={publishDate}>
									{new Date(publishDate).toLocaleDateString('en-US', {
										year: 'numeric',
										month: 'long',
										day: 'numeric'
									})}
								</time>
							</p>
						)}
						{description && (
							<p class="text-xl text-gray-700 dark:text-gray-300 leading-relaxed font-medium">
								{description}
							</p>
						)}
					</header>

					<div class="prose prose-lg dark:prose-invert max-w-none">
						<slot />
					</div>
				</article>

				<aside class="hidden lg:block">
					<slot name="sidebar" />
				</aside>
			</div>
		</div>
	</main>

	<Footer />
</Layout>

<style>
	/* Breadcrumb styling */
	nav :global(ol) {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 0.5rem;
		list-style: none;
		padding: 0;
		margin: 0;
	}

	nav :global(li) {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		margin: 0;
	}

	nav :global(li:not(:last-child)::after) {
		content: '/';
		@apply text-gray-400 dark:text-gray-600;
	}

	/* Sidebar styling */
	aside :global(.sidebar-section) {
		@apply bg-gray-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6;
	}

	aside :global(.sidebar-section h3) {
		@apply text-lg mb-4;
	}
</style>

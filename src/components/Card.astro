---
import Icon from './Icon.astro';

interface Props {
	title: string;
	description?: string;
	href?: string;
	icon?: string;
	class?: string;
}

const {
	title,
	description,
	href,
	icon,
	class: className = ''
} = Astro.props;

const Tag = href ? 'a' : 'div';
---

<Tag
	href={href}
	class:list={['card', { 'card-link': href }, className]}
>
	{icon && (
		<div class="card-icon" aria-hidden="true">
			<Icon name={icon} size="xl" />
		</div>
	)}
	<div class="card-content">
		<h3 class="card-title">{title}</h3>
		{description && (
			<p class="card-description">{description}</p>
		)}
		<slot />
	</div>
	{href && (
		<div class="card-arrow" aria-hidden="true">
			â†’
		</div>
	)}
</Tag>

<style>
	.card {
		display: flex;
		flex-direction: column;
		background-color: white;
		border: 1px solid var(--color-gray-200);
		border-radius: var(--radius-xl);
		padding: var(--space-6);
		box-shadow: var(--shadow-sm);
		transition: all var(--transition-base);
		text-decoration: none;
		color: inherit;
		height: 100%;
	}

	.card:hover {
		text-decoration: none;
	}

	.card-link {
		cursor: pointer;
		position: relative;
	}

	.card-link:hover {
		border-color: var(--color-primary-300);
		box-shadow: var(--shadow-lg);
		transform: translateY(-2px);
	}

	.card-link:hover .card-title {
		color: var(--color-primary-600);
	}

	.card-link:hover .card-arrow {
		transform: translateX(4px);
		color: var(--color-primary-600);
	}

	.card-icon {
		font-size: var(--text-4xl);
		margin-bottom: var(--space-4);
		color: var(--color-primary-600);
	}

	.card-content {
		flex: 1;
	}

	.card-title {
		font-size: var(--text-xl);
		font-weight: 700;
		color: var(--color-gray-900);
		margin-bottom: var(--space-3);
		transition: color var(--transition-base);
	}

	.card-description {
		font-size: var(--text-base);
		color: var(--color-gray-600);
		line-height: var(--leading-relaxed);
		margin-bottom: 0;
	}

	.card-arrow {
		display: flex;
		align-items: center;
		justify-content: flex-end;
		font-size: var(--text-2xl);
		color: var(--color-gray-400);
		margin-top: var(--space-4);
		transition: all var(--transition-base);
	}

	/* Focus styles for accessibility */
	.card-link:focus-visible {
		outline: 2px solid var(--color-primary-500);
		outline-offset: 2px;
	}
</style>

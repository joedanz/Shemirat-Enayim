---
interface Props {
	class?: string;
}

const { class: className = '' } = Astro.props;
---

<div class:list={['infographic', 'dns-flow-diagram', className]}>
	<h3 class="infographic-title">How DNS Filtering Works</h3>
	<svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="dns-flow-title dns-flow-desc">
		<title id="dns-flow-title">DNS Filtering Process Flow Diagram</title>
		<desc id="dns-flow-desc">
			A flowchart showing how DNS filtering protects your network by checking website requests before they reach your devices.
			The process flows from device request, through DNS filter, to either approved or blocked content.
		</desc>

		<!-- Device -->
		<rect x="50" y="150" width="120" height="100" rx="10" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>
		<text x="110" y="190" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e40af">Your Device</text>
		<text x="110" y="210" text-anchor="middle" font-size="12" fill="#1e40af">Computer/Phone</text>
		<text x="110" y="230" text-anchor="middle" font-size="12" fill="#1e40af">Tablet/TV</text>

		<!-- Arrow 1 -->
		<path d="M 170 200 L 230 200" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
		<text x="200" y="190" text-anchor="middle" font-size="11" fill="#4b5563">1. Request</text>

		<!-- DNS Filter -->
		<rect x="230" y="150" width="140" height="100" rx="10" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
		<text x="300" y="185" text-anchor="middle" font-size="16" font-weight="bold" fill="#15803d">DNS Filter</text>
		<text x="300" y="205" text-anchor="middle" font-size="11" fill="#15803d">OpenDNS</text>
		<text x="300" y="220" text-anchor="middle" font-size="11" fill="#15803d">CleanBrowsing</text>
		<text x="300" y="235" text-anchor="middle" font-size="11" fill="#15803d">NextDNS</text>

		<!-- Arrow 2a (Approved) -->
		<path d="M 370 180 L 450 100" stroke="#16a34a" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
		<text x="410" y="130" text-anchor="middle" font-size="11" fill="#16a34a" font-weight="bold">✓ Approved</text>

		<!-- Arrow 2b (Blocked) -->
		<path d="M 370 220 L 450 300" stroke="#dc2626" stroke-width="2" fill="none" marker-end="url(#arrowhead-red)"/>
		<text x="410" y="270" text-anchor="middle" font-size="11" fill="#dc2626" font-weight="bold">✗ Blocked</text>

		<!-- Approved Content -->
		<rect x="450" y="50" width="140" height="100" rx="10" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
		<text x="520" y="85" text-anchor="middle" font-size="16" font-weight="bold" fill="#15803d">Safe Content</text>
		<text x="520" y="105" text-anchor="middle" font-size="12" fill="#15803d">Educational sites</text>
		<text x="520" y="125" text-anchor="middle" font-size="12" fill="#15803d">News & information</text>

		<!-- Blocked Content -->
		<rect x="450" y="250" width="140" height="100" rx="10" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
		<text x="520" y="285" text-anchor="middle" font-size="16" font-weight="bold" fill="#991b1b">Blocked</text>
		<text x="520" y="305" text-anchor="middle" font-size="12" fill="#991b1b">Inappropriate</text>
		<text x="520" y="325" text-anchor="middle" font-size="12" fill="#991b1b">content</text>

		<!-- Arrow 3 (back to device) -->
		<path d="M 590 100 Q 650 100, 650 200 T 590 300" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
		<text x="680" y="200" text-anchor="middle" font-size="11" fill="#4b5563">3. Response</text>

		<!-- Arrow markers -->
		<defs>
			<marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
				<polygon points="0 0, 10 3, 0 6" fill="#374151"/>
			</marker>
			<marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
				<polygon points="0 0, 10 3, 0 6" fill="#16a34a"/>
			</marker>
			<marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
				<polygon points="0 0, 10 3, 0 6" fill="#dc2626"/>
			</marker>
		</defs>

		<!-- Legend -->
		<g transform="translate(50, 300)">
			<text x="0" y="0" font-size="12" font-weight="bold" fill="#374151">How it works:</text>
			<text x="0" y="20" font-size="11" fill="#4b5563">1. Your device requests a website</text>
			<text x="0" y="38" font-size="11" fill="#4b5563">2. DNS filter checks if site is safe</text>
			<text x="0" y="56" font-size="11" fill="#4b5563">3. Safe content loads, blocked content stops</text>
		</g>
	</svg>
</div>

<style>
	.infographic {
		margin: var(--space-8) 0;
		padding: var(--space-6);
		background: white;
		border: 1px solid var(--color-gray-200);
		border-radius: var(--radius-xl);
	}

	.infographic-title {
		font-size: var(--text-2xl);
		font-weight: 700;
		color: var(--color-gray-900);
		text-align: center;
		margin-bottom: var(--space-6);
	}

	.dns-flow-diagram svg {
		width: 100%;
		height: auto;
		max-width: 800px;
		margin: 0 auto;
		display: block;
	}

	@media print {
		.infographic {
			page-break-inside: avoid;
			border: 1px solid #ddd;
		}
	}
</style>
